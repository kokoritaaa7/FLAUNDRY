{% extends 'base.html' %}
{% load static %}
{% block contents %}
<style>
.total_score {
    font-size: 3em;
  }
  #total_score{
    border : none;
    font-size: 20px;
  }

  .btn_kakao {
    background-color: #F2DA01;
    margin-bottom : 10px
  }
</style>
    <div class="theme-hero-area">
      <div class="theme-hero-area-bg-wrap">
        <div class="theme-hero-area-bg" style="background-image:url(https://www.harborparkhotel.com/HarborparkHotel_common/images/homepage/facilities/laundry7.jpg);"></div>
        <div class="theme-hero-area-mask theme-hero-area-mask-strong"></div>
        <div class="theme-hero-area-inner-shadow"></div>
      </div>
      <div class="theme-hero-area-body">
        <div class="container">
          <div class="theme-item-page-header _pt-300 _pb-50 _pt-mob-100 theme-item-page-header-white">
            <div class="row">
              <div class="col-md-10 col-md-offset-1">
                <div class="theme-item-page-header-body">
                  <div class="theme-item-page-header-rating">
                    
                    <ul class="theme-item-page-header-rating-stars">
                        <li>
                          <i class="fa fa-star"></i>
                        </li>
                        <li>
                          <i class="fa fa-star"></i>
                        </li>
                        <li>
                          <i class="fa fa-star"></i>
                        </li>
                        <li>
                          <i class="fa fa-star"></i>
                        </li>
                        <li>
                          <i class="fa fa-star"></i>
                        </li>
                    </ul>


                    <p class="theme-item-page-header-rating-title">μ΄ λ¦¬λ·° {{ review_num }}κ°</p>
                  </div>
                  <h1 class="theme-item-page-header-title _ff-d _fw-200">{{ laundry.laundry_name }}</h1>
                  <div class="theme-item-page-header-price theme-item-page-header-price-xl">
                    <p class="theme-item-page-header-price-body">
                      <b>β‚©{{ D_price }}~</b>
                      <span>/ 1ν, κΈ°λ³Έ</span>
                    </p>
                  </div>
                  <ul class="theme-breadcrumbs">
                    <li>
                      <p class="theme-breadcrumbs-item-title">
                        <b>{{ laundry.laundry_address}} <br> {{ laundry.laundry_road }}</b>
                      </p>
                    </li>
                  </ul>
                  <a class="btn _tt-uc _ls-0 _mt-30 _p-15 magnific-gallery-link btn-default btn-white" data-items={{laundry.laundry_img}},{{laundry.laundry_img}} href="#">
                    <i class="btn-icon fa fa-camera"></i>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="theme-page-section _pv-0">
      <div class="container">
        <div class="row">
          <div class="col-md-10 col-md-offset-1">
            <div class="row row-col-static row-eq-height row-col-border" id="sticky-parent" data-gutter="60">
              <div class="col-md-8 ">
                <!-- μƒμ„Έ μ„¤λ… -->
                <div class="theme-item-page-details _pv-45 theme-item-page-details-first-nm">
                  <div class="theme-item-page-details-section">
                    <div class="row">
                      <div class="col-md-3 ">
                        <h5 class="theme-item-page-details-section-title">μƒμ„Έ μ„¤λ…</h5>
                      </div>
                      <div class="col-md-9 ">
                        <div class="theme-item-page-desc">
                          <p>μ•λ…•ν•μ„Έμ”!</p> 
                          <p>μ΄ν† λ΅ μ‰½κ³ λ„ λ©‹μ§„ μ„Ένƒ FLaundry μ…λ‹λ‹¤!</p>
                          <p>FLaundryλ” ν„κΈ μ—†λ” μΉ΄λ“κ²°μ  μ„λΉ„μ¤λ¥Ό μ κ³µν•©λ‹λ‹¤.</p>
                          <p>ν‰μ†μ— μ‚¬μ©ν•λ μ‹ μ©μΉ΄λ“, μ²΄ν¬μΉ΄λ“, μ‚Όμ„±νμ΄λ΅ κ°„νΈν•κ² κ²°μ ν•μ„Έμ”π™‹π™‹β€β™‚π™‹β€β™€</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="theme-item-page-details-section">
                    <div class="row">
                      <div class="col-md-3 ">
                        <h5 class="theme-item-page-details-section-title">μ„ΈνƒκΈ° μ‚¬μ©μ”κΈ</h5>
                      </div>
                      <div class="col-md-9 ">
                        <div class="row">
                          <div class="col-md-6 ">
                            <ul class="theme-item-page-details-list">
                              <li>20kg</li>
                          <li><input type="radio" name="laundry" class="laundry1"  value="{{ D_price }}">ν‘μ¤€μ„Ένƒ :
                            β‚©{{ D_price }}</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="5000">ν‘μ¤€μ¨μμ„Ένƒ : β‚©5,000</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="5000">ν–¥κ· μ„Ένƒ : β‚©5,000</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="5000">ν–¥κ· μ¨μμ„Ένƒ : 5,000</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="5000">μ‚°μ†κ³„ν‘λ°±μ„Ένƒ : β‚©5,000</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="5500">μ‚°μ†κ³„ν‘λ°±μ¨μμ„Ένƒ : β‚©5,500</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="6500">ν”„λ¦¬λ―Έμ—„μ„Ένƒ : β‚©6,500</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="4000">μΎμ†μ„Ένƒ : β‚©4,000</li>
                          <label>μ¶”κ°€ μµμ…</label>
                          <li><input type="radio" name="laundry-option"  class="laundry-option"
                              value="1000">μ¶”κ°€ν—ΉκµΌ : β‚©1,000</li>
                          <li><input type="radio" name="laundry-option" class="laundry-option" value="500">μ„Ένƒν†µν–¥κ· μ„Έμ²™ :
                            β‚©500</li>
                            </ul>
                          </div>
                          <div class="col-md-6 ">
                            <ul class="theme-item-page-details-list">
                              <li>28kg</li>
                              <li><input type="radio" name="laundry" class="laundry1" value="6500">ν‘μ¤€μ„Ένƒ : β‚©6,500</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="7000">ν‘μ¤€μ¨μμ„Ένƒ : β‚©7,000</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="7000">ν–¥κ· μ„Ένƒ : β‚©7,000</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="7000">ν–¥κ· μ¨μμ„Ένƒ : 7,000</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="7000">μ‚°μ†κ³„ν‘λ°±μ„Ένƒ : β‚©7,000</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="7500">μ‚°μ†κ³„ν‘λ°±μ¨μμ„Ένƒ : β‚©7,500</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="7500">μ•„μ›ƒλ„μ–΄μ„Ένƒ : β‚©7,500</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="8500">ν”„λ¦¬λ―Έμ—„μ„Ένƒ : β‚©8,500</li>
                          <li><input type="radio" name="laundry" class="laundry1" value="6000">μΎμ†μ„Ένƒ : β‚©6,000</li>
                          <label>μ¶”κ°€ μµμ…</label>
                          <li><input type="radio" name="laundry-option" class="laundry-option" value="1000">μ¶”κ°€ν—ΉκµΌ :
                            β‚©1,000</li>
                          <li><input type="radio" name="laundry-option" class="laundry-option" value="500">μ„Ένƒν†µν–¥κ· μ„Έμ²™ :
                            β‚©500</li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="theme-item-page-details-section">
                    <div class="row">
                      <div class="col-md-3 ">
                        <h5 class="theme-item-page-details-section-title">κ±΄μ΅°κΈ° μ‚¬μ©μ”κΈ</h5>
                      </div>
                      <div class="col-md-9 ">
                        <div class="row">
                          <div class="col-md-6 ">
                            <ul class="theme-item-page-details-list">
                              <li>16kg</li>
                              <li><input type="radio"  class="dryer" name="dryer" value="3500">κ³ μ¨ : β‚©3,500
                          </li>
                          <li><input type="radio" name="dryer" class="dryer" value="3500">μ¤‘μ¨ : β‚©3,500</li>
                          <li><input type="radio" name="dryer" class="dryer" value="3500">μ €μ¨ : β‚©3,500</li>
                            </ul>
                          </div>
                          <div class="col-md-6 ">
                            <ul class="theme-item-page-details-list">
                              <li>30kg</li>
                               <li><input type="radio"  class="dryer" name="dryer" value="3500">κ³ μ¨ : β‚©3,500
                          </li>
                          <li><input type="radio" name="dryer" class="dryer" value="3500">μ¤‘μ¨ : β‚©3,500</li>
                          <li><input type="radio" name="dryer" class="dryer" value="3500">μ €μ¨ : β‚©3,500</li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="theme-item-page-details-section">
                    <div class="row">
                      <div class="col-md-3 ">
                        <h5 class="theme-item-page-details-section-title">νΈμμ‚¬ν•­</h5>
                      </div>
                      <div class="col-md-9 ">
                        <div class="row">
                          <div class="col-md-4 ">
                            <ul class="theme-item-page-details-list theme-item-page-details-list-checked">
                              <li>ν΄μ‹κ³µκ°„</li>
                              <li>μ»¤ν”Όλ¨Έμ‹ </li>
                              <li>TV</li>
                              <li>Wi-Fi</li>
                            </ul>
                          </div>
                          <div class="col-md-4 ">
                            <ul class="theme-item-page-details-list theme-item-page-details-list-checked">
                              <li>μ—μ–΄μ»¨</li>
                              <li>κ³µκΈ°μ²­μ •κΈ°</li>
                              <li>λ¬΄μΈ λ³΄κ΄€ν•¨</li>
                              <li>λΉ¨λ λ°”κµ¬λ‹</li>
                            </ul>
                          </div>
                          <div class="col-md-4 ">
                            <ul class="theme-item-page-details-list theme-item-page-details-list-checked">
                              <li>μΉ΄νΈ</li>
                              <li>ν΄λ€ν° μ¶©μ „κΈ°</li>
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="theme-item-page-details-section">
                    <div class="row">
                      <div class="col-md-3 ">
                        <h5 class="theme-item-page-details-section-title">μ„μΉ</h5>
                      </div>
                      <div class="col-md-9 ">

                        <!-- <div class="theme-item-page-map google-map" data-lat="40.7483624" data-lng="-73.9900896" data-tab="false"></div> -->
                        <div id="map" style="width:100%; height:200px;"></div>
                        <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=f56105d065f938ed8ae37254cd5c70ae"></script>
                        <script>
                          var mapContainer = document.getElementById('map'), // μ§€λ„λ¥Ό ν‘μ‹ν•  div 
                          mapOption = { 
                            center: new kakao.maps.LatLng({{laundry.laundry_lat}}, {{laundry.laundry_lng}}), // μ§€λ„μ μ¤‘μ‹¬μΆν‘
                            level: 3 // μ§€λ„μ ν™•λ€ λ λ²¨
                          };

                          // μ§€λ„λ¥Ό μƒμ„±ν•λ‹¤ 
                          var map = new kakao.maps.Map(mapContainer, mapOption);
                          // μ§€λ„μ— ν™•λ€ μ¶•μ† μ»¨νΈλ΅¤μ„ μƒμ„±ν•λ‹¤
                          var zoomControl = new kakao.maps.ZoomControl();

                          // μ§€λ„μ μ°μΈ΅μ— ν™•λ€ μ¶•μ† μ»¨νΈλ΅¤μ„ μ¶”κ°€ν•λ‹¤
                          map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

                          // λ§μ»¤κ°€ ν‘μ‹λ  μ„μΉμ…λ‹λ‹¤ 
                          var markerPosition  = new kakao.maps.LatLng({{laundry.laundry_lat}}, {{laundry.laundry_lng}});

                          // λ§μ»¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤
                          var marker = new kakao.maps.Marker({
                            map: map,
                            position: markerPosition,
                          });

                          // λ§μ»¤κ°€ μ§€λ„ μ„μ— ν‘μ‹λλ„λ΅ μ„¤μ •ν•©λ‹λ‹¤
                          marker.setMap(map);

                        </script>
                      
                      </div>
                    </div>
                  </div>
                  <div class="theme-item-page-details-section">
                    <div class="row">
                      <div class="col-md-3 ">
                        <h5 class="theme-item-page-details-section-title">λ¦¬λ·°</h5>
                      </div>
                      <div class="col-md-9 ">
                        <div class="theme-reviews">
                          <div class="theme-reviews-list">
                            {% if review %}
                              {% for r in review %}
                                <article class="theme-reviews-item">
                                  <div class="row" data-gutter="10">
                                    <div class="col-md-3 ">
                                      <div class="theme-reviews-item-info">
                                          <img class="theme-reviews-item-avatar" src="{% static '/img/icon.png' %}" alt="Image Alternative text" title="Image Title"/>
                                          <p class="theme-reviews-item-date">{{r.review_date}}</p>
                                          <p class="theme-reviews-item-author">{{r.users.user_nick}}</p>
                                      </div>
                                    </div>
                                    <div class="col-md-9 ">
                                      <div class="theme-reviews-rating">
                                        <ul class="theme-reviews-rating-stars">
                                          <li>
                                            <i class="fa fa-star"></i>
                                          </li>
                                          <li>
                                            <i class="fa fa-star"></i>
                                          </li>
                                          <li>
                                            <i class="fa fa-star"></i>
                                          </li>
                                          <li>
                                            <i class="fa fa-star"></i>
                                          </li>
                                          <li>
                                            <i class="fa fa-star-half-o"></i>
                                          </li>
                                        </ul>
                                      </div>
                                      <div class="theme-reviews-item-body">
                                        <p class="theme-reviews-item-text">{{r.review_content}}</p>
                                      </div>
                                    </div>
                                  </div>
                                </article>
                              {% endfor %}
                            {% endif %}
                            
                            <div class="row">
                              <div class="col-md-9 col-md-offset-3">
                                <a class="theme-reviews-more" href="#">&#x2b; More Reviews</a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4 ">
                <div class="sticky-col _pv-45 _mob-h">
                  <div class="theme-search-area theme-search-area-vert">
                    <div class="theme-search-area-header _mb-20 theme-search-area-header-sm">
                      <h1 class="theme-search-area-title">QRκ²°μ </h1>
                      <p class="theme-search-area-subtitle">μ‰½κ³  κ°„νΈν•κ² κ²°μ λ¥Ό ν•΄λ³΄μ„Έμ”.</p>
                    </div>
                    <div class="theme-search-area-form">
                      <div class="theme-item-page-summary-price _mb-20">
                      <form method="post" action="{% url 'user:kakaopay' %}" class="col-12 text-center">
                        {% csrf_token %}
                        <p class="theme-item-page-summary-price-total" id="total_cost">μ΄ κΈμ•΅
                          <input type="text" text-align="center" name="total_score" id="total_score"/>
                        <button class="theme-search-area-submit _mt-0 _tt-uc theme-search-area-submit-curved btn_kakao">μΉ΄μΉ΄μ¤νμ΄λ΅ κ²°μ ν•κΈ°</button>
                      </form>
                        <button
                        class="theme-search-area-submit _mt-0 _tt-uc theme-search-area-submit-curved" ><a href="{% url 'user:cards' %}">μΌλ°μΉ΄λ“κ²°μ </a></button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="theme-footer" id="mainFooter">
      <div class="container _ph-mob-0">
        <div class="row row-eq-height row-mob-full" data-gutter="60">
          <div style="margin:30px";></div>
        </div>
      </div>
    </div>
    <div class="theme-copyright">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <p class="theme-copyright-text">Copyright &copy; 2021
              <a href="https://github.com/HyunCheolNam/miniproject2">Github</a>. All rights reserved.
            </p>
          </div>
        </div>
      </div>
    </div>
    <script src="js/jquery.js"></script>
    <script src="js/moment.js"></script>
    <script src="js/bootstrap.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDYeBBmgAkyAN_QKjAVOiP_kWZ_eQdadeI&callback=initMap&libraries=places"></script>
    <script src="js/owl-carousel.js"></script>
    <script src="js/blur-area.js"></script>
    <script src="js/icheck.js"></script>
    <script src="js/gmap.js"></script>
    <script src="js/magnific-popup.js"></script>
    <script src="js/ion-range-slider.js"></script>
    <script src="js/sticky-kit.js"></script>
    <script src="js/smooth-scroll.js"></script>
    <script src="js/fotorama.js"></script>
    <script src="js/bs-datepicker.js"></script>
    <script src="js/typeahead.js"></script>
    <script src="js/quantity-selector.js"></script>
    <script src="js/countdown.js"></script>
    <script src="js/window-scroll-action.js"></script>
    <script src="js/fitvid.js"></script>
    <script src="js/youtube-bg.js"></script>
    <script src="js/custom.js"></script>
    <script type="text/javascript">
  // let total_score = document.getElementById('total_score')
  // $("input[name='laundry1']:radio").change(function () {
  //       //λΌλ””μ¤ λ²„νΌ κ°’μ„ κ°€μ Έμ¨λ‹¤.
  //       var noticeCat = this.value;

  //       console.log(noticeCat);            
  // });

  //function totalCost() {
  // let cost1 = $(this).val()
  let cost1 = 0
  let cost2 = 0
  let cost3 = 0
  let totalCost = 0
  let score_input = document.getElementById('total_score').value;
  $(".laundry1").on('click', function () {
    let text = $(this).parent().text()
    cost1 = $(this).val()
    cost1 = parseInt(cost1)
    cost2 = parseInt(cost2)
    cost3 = parseInt(cost3)

    //cost1 λ” str νƒ€μ…. integerλ΅ λ³€ν™ν•΄μ•Όν•¨
    console.log(cost1)
    if (cost2 != 0 && cost3 != 0) {
      totalCost = cost1 + cost2 + cost3
    } else if (cost2 != 0 && cost3 == 0) {
      totalCost = cost1 + cost2
    } else if (cost2 == 0 && cost3 != 0) {
      totalCost == cost1 + cost3
    } else {
      totalCost = cost1
    }

    // window.location.href = "μ£Όμ†?" + 'κ°’='+ cost1
    //var total_score = document.getElementById('total_score')
    $("#total_score").val(totalCost)
    score_input = totalCost
    console.log(score_input)
    
    // $(total_score).append(`<p>${text} : ${cost1}μ›</p>`)
    //htmlμ— μ½”λ“ μ¶”κ°€
    //$(total_score).html(`<p>μ΄ κ°€κ²© : ${totalCost}μ›</p>`)
    
    // $(total_score).innerText = `μ΄ κ°€κ²© : ${totalCost}μ›`
    console.log(total_score)
    // $(total_score) = 
  })

  $(".laundry-option").on('click', function () {
    let text = $(this).parent().text()
    //cost1 λ” str νƒ€μ…. integerλ΅ λ³€ν™ν•΄μ•Όν•¨
    cost2 = $(this).val()

    cost1 = parseInt(cost1)
    cost2 = parseInt(cost2)
    cost3 = parseInt(cost3)
    console.log(typeof (cost1))
    if (cost1 != 0 && cost3 != 0) {
      totalCost = cost1 + cost2 + cost3
    } else if (cost1 != 0 && cost3 == 0) {
      totalCost = cost1 + cost2
    } else if (cost1 == 0 && cost3 != 0) {
      totalCost == cost2 + cost3
    } else {
      totalCost = cost2
    }
    //$(total_score).html(`<p class="total_cost">μ΄ κ°€κ²© : ${totalCost}μ›</p>`)
    $("#total_score").val(totalCost)

    // $(total_score) = 
  })
  
  $(".dryer").on('click', function () {
    let text = $(this).parent().text()
    //cost1 λ” str νƒ€μ…. integerλ΅ λ³€ν™ν•΄μ•Όν•¨
    cost3 = $(this).val()

    cost1 = parseInt(cost1)
    cost2 = parseInt(cost2)
    cost3 = parseInt(cost3)

    if (cost1 != 0 && cost2 != 0) {
      totalCost = cost1 + cost2 + cost3
    } else if (cost1 != 0 && cost2 == 0) {
      totalCost = cost1 + cost3
    } else if (cost1 == 0 && cost2 != 0) {
      totalCost == cost2 + cost3
    } else {
      totalCost = cost3
    }
    //$(total_score).html(`<p class="total_cost">μ΄ κ°€κ²© : ${totalCost}μ›</p>`)
    // $(total_score) = 
    $("#total_score").val(totalCost)
  })


  //μΉ΄μΉ΄μ¤νμ΄μ—°κ²°
  let kakaopay = document.querySelector('.btn_kakao');
  kakaopay.addEventListener('click', e => {
    let total_cost = document.getElementById('total_cost')
    console.log(total_cost)
    let param = {
      'total_cost' : total_cost
    }
    $.ajax({
      url : "{% url 'user:kakaopay' %}",
      type : 'POST',
      data : JSON.stringify(param),
      success:function(data) {
        console.log("μ„±κ³µ")
      }
      

    })
  })
  // $(".laundry").on('click',function() {
  // })
    //}
</script>
  </body>
</html>
{% endblock %}